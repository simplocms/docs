---
id: main
title: Installation
sidebar_label: Installation
---

Latest version of laravel used: **5.8**

## Server Requirements

Firstly make sure your server meets the following requirements:

* PHP >= 7.2
* OpenSSL PHP Extension
* PDO MySQL PHP Extension
* Mbstring PHP Extension
* Tokenizer PHP Extension
* XML PHP Extension
* MySQL database ^5.6
* Enabled mod_rewrite for Apache
* GD or Imagick PHP Extension (Imagick recommended)

For development there are few more recommended requirements that will make your work easier:

* cURL extension
* SQLite3 extension
* GD extension

> More detailed information for Laravel can be found in official documentation: https://laravel.com/docs/5.8

## Installation

**If you want to setup Docker container for development, you need to install `docker-compose` and follow guide in `.docker/README.md`.**

> *This installation guide is written for "LAMP" stack environment.*

If you are using project's docker image, connect to the `web` container and proceed with installation in the container:

```bash
# Run this in project root directory
$ docker-compose exec web /bin/bash
```

### Composer

> If you do not have composer on your machine, [download](https://getcomposer.org/download/) and install it. Composer is already present in Docker container.

```bash
$ composer install
```

### Node.js

> If you do not have Node.js on your machine, [download](https://nodejs.org/en/) and install it. Currently recommended version is 8.*. Node.js is already present in Docker container.

```bash
# Install npm dependencies
$ npm i
```

> TIP for windows users: Run installation with `--no-bin-links` argument.

## Configuration

### File permissions

You have to make sure, that Apache user has write permissions to directories `bootstrap` and `storage`.

```bash
# Change owner to www-data group (apache)
$ chown -R :www-data .
# Setup permissions
$ chmod -R ug+rwx ./bootstrap ./storage
```

### Environment configuration

```bash
# Copy preconfigured .env.example to .env
$ copy .env.example .env
# Generate application key
$ php artisan key:generate
```

> If you are using Docker container, all important configuration is set within the container.

### Laravel variables

* **APP_ENV** - this value defines environment used on the server. It can have two different values: local that prepares the application for testing on the development server, and production that will fully optimize the application for the mass usage in production.
* **APP_DEBUG** - this field determines whether debugging tools will be ON or OFF. Keep it in sync with APP_ENV, where if `APP_ENV=production` then always use `APP_DEBUG=false`, otherwise `APP_DEBUG=true`.
* **APP_KEY** - this is a random key generated using command `php artisan key:generate`. It is used in the process of generating and verifying passwords - so if you ever decide to change this value after the initial setup, it will cause all passwords generated by Laravel to be no longer valid.
* **APP_URL** -  this variable should contain your application’s address. It’s used to generate urls in application.
* **DB_…** - these six fields are used to configure a connection to your database. Most of the fields are self-explanatory. The only exception is “DB_CONNECTION”, where you should use “mysql”.
* **CACHE_DRIVER** - should have value `file`, which is standard for CMS. Cache files will be stored in “storage/framework/cache”. Don’t forget that `www-data` user needs write permissions to that directory.
* **SESSION_DRIVER** - should have value `file`, which is standard for CMS. Session files will be stored in “storage/framework/sessions”. Don’t forget that `www-data` user needs write permissions to that directory.
* **SESSION_LIFETIME** - this value decides, how long will user's session last in minutes.

### SIMPLOCMS variables

* **SENTRY_DSN** - keep default value. It helps us to track issues in system and fix them.
* **GOOGLE_CLIENT_…** - keep defaults for these two values. It is reference to our google application for connecting to google analytics on dashboard of administration.
* **TESTING_DB_DATABASE** - name of the existing database, that use used while running tests for temporary data. User defined in `DB_USERNAME` must have access to this database.
* **SIMPLE_PAGE_URL** - when set to `true`, sub-pages will have own URL address, but when is `false`, url addresses of sub-pages will be prefixed with url address of parent pages.

## Setup

At this point, database connection should be configured. If there is a problem, you will know immediately.

```bash
# Creates database tables and seeds basic data
$ php artisan migrate --seed
```

### Compile your assets

#### Development

In development you want to compile assets to be debuggable and readable.

```bash
# Keep watching changes in source code and recompile on every change:
$ npm run watch
# OR single time compilation:
$ npm run dev
```

#### Production

On production server you want to compile assets to be minimized and not-readable, without debuggers and console logs:

```bash
# Build production assets:
$ npm run prod
```

### Template installation

1) You have to copy a theme into directory `themes`.
2) If template contains `modules` directory, go to the template's directory and run command `composer dump-autoload`.
3) Sign in into CMS administration and go to Settings > Template (Nastavení > Šablona).
4) Click on “Change” (Změnit) and then activate your template.


### Image optimization

Media Library can optimize uploaded PNGs, JPGs, SVGs and GIFs by running them through a chain of various image optimization tools. It will use these optimizers if they are present on the server:

- [JpegOptim](http://freecode.com/projects/jpegoptim)
- [Optipng](http://optipng.sourceforge.net/)
- [Pngquant 2](https://pngquant.org/)
- [SVGO](https://github.com/svg/svgo)
- [Gifsicle](http://www.lcdf.org/gifsicle/)

Here's how to install all the optimizers with APT:

```bash
$ sudo apt-get install jpegoptim
$ sudo apt-get install optipng
$ sudo apt-get install pngquant
$ sudo npm install -g svgo
$ sudo apt-get install gifsicle
```
